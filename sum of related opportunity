trigger to find sum of all related opportunity amount of a account.

trigger OpportunityManager on Opportunity (after insert, after update, after delete) 
{
     List<String> accountIds = new List<String>();
    if(Trigger.isInsert || Trigger.isUpdate){
        for(Opportunity opp: Trigger.new){
            accountIds.add(opp.AccountId);
        }
    }
    if(Trigger.isDelete){
        for(Opportunity opp: Trigger.old){
            accountIds.add(opp.AccountId);
        }
    }
  
    List<AggregateResult> aggResult = [SELECT AccountId , SUM(Amount) sumAmt
                                FROM Opportunity
                                WHERE AccountId IN : accountIds
                                GROUP BY AccountId]; 
    List<Account> accountToUpdate = new List<Account>();
    for(AggregateResult agg: aggResult){
        Account acc = new Account();
        acc.Id = (Id)agg.get('AccountId');
        acc.Top_Amount__c = (Decimal)agg.get('sumAmt');
        accountToUpdate.add(acc);
    }
    update accountToUpdate;
}
